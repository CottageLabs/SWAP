{% extends "base.html" %}

{% block content %}

<script>
jQuery(document).ready(function() {    

    $("[data-required]").attr('data-required-message',"");

    // add a datepicker to all datepicker classes
    var opts = {
        inline: true,
        dateFormat: 'dd/mm/yy',
        changeYear: true
    }
    $('.datepicker').datepicker(opts);
    opts.yearRange = "1940:+80";
    opts.defaultDate = '-23y';
    opts.minDate = '-80y';
    opts.maxDate = '-12y';
    $('.dobdatepicker').datepicker(opts);
        
    $('.select2this').select2({"width":"element"});

    $('#survey').parsley('validate');
    
    var limitcourse = function(event) {
        $('.courseselector').attr("disabled","disabled");
        var url = '/stream/course/course?q=college.exact:"' + $('.collegeselector').val() + '" AND campus.exact:"' + $(this).val() + '"';
        $.ajax({
            method:'GET',
            datatype:'JSON',
            url:url,
            obj:$(this),
            success: function(data) {
                var opts = '<option></option>';
                for ( var i = 0; i < data.length; i++ ) {
                    opts += "<option>" + data[i] + "</option>";
                }
                $('.courseselector').html(opts).removeAttr("disabled");
            }
        });
    }
    var limitcampus = function(event) {
        var college = $(this).val();
        $('.campusselector').attr("disabled","disabled");
        $('.courseselector').attr("disabled","disabled");
        if ( college == "" ) {
            var campus = {{ selections.campus|tojson|safe }};
            var opts = '<option></option>';
            for ( var i = 0; i < campus.length; i++ ) {
                opts += "<option>" + campus[i] + "</option>";
            }
            $('.campusselector').html(opts).removeAttr("disabled");
            $('.courseselector').html(opts).removeAttr("disabled");
        } else {
            var url = '/stream/course/campus?q=college.exact:"' + college + '"';
            $.ajax({
                method:'GET',
                datatype:'JSON',
                url:url,
                obj:$(this),
                success: function(data) {
                    var opts = '<option></option>';
                    for ( var i = 0; i < data.length; i++ ) {
                        opts += "<option>" + data[i] + "</option>";
                    }
                    $('.campusselector').html(opts).removeAttr("disabled");
                }
            });
        }
    }
    $('.collegeselector').bind('change',limitcampus);
    $('.campusselector').bind('change',limitcourse);

    var triggersave = function(event) {
        if ( !$('#survey').parsley('validate') ) {
            event.preventDefault();
            $('.activealert').show();
        }
    };
    $('#triggersave').bind('click',triggersave);

    // block an enter keypress from submitting the form
    $("form").bind("keypress", function (event) {
        var key = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
        if (key == 13) {
            return false;
        }
    });
    
    // when an input box is entered, remove the placeholder. This used to work automatically, 
    // but for some reason stupid browsers now leave it there
    $('input[placeholder]').bind("focus",function() { $(this).removeAttr('placeholder'); });
});
</script>

<style>
.part .well{
    margin-top:20px;
}
.narrow{
    width:180px;
}
.narrow.datepicker{
    width:100px;
}
input, textarea {
    width:200px;
}
select {
    width:210px;
}
.add-row, .delete-row {
    width:35px;
}
textarea.bigfield{
    width:400px;
    height:150px;
}
input.bigfield{
    width:360px;
    height:150px;
}
.select2this{
    width:400px;
}
</style>

<form action="" id="survey" name="survey" method="post" data-validate="parsley">
<fieldset>


<!-- the intro part -->
<div class="part intro">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h1>Welcome to the SWAP registration form</h1>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">
	        <p><strong>DO NOT CLOSE YOUR BROWSER WHILST COMPLETING THE FORM.</strong></p>
	        <p>Only students on <strong>SWAP programmes</strong> should complete the form.</p>

	        <p>Required inputs are shown in red, until they are completed appropriately, when they will become green. You should check that all required inputs are green before proceeding. Inputs that are optional remain white.</p>

	        <p>Your responses will only be saved when you reach the end of the form and press the submit button.</p>
        </div>
	</div>

</div>



<!-- the student details page -->
<div class="part student">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>Your details</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">First name</td>
                		<td><input type="text" name="first_name" data-required="true" tabindex=1></td>

	                    <td style="text-align:right;padding:6px 10px 0 0;">Email address</td>
                		<td><input type="text" name="email" data-type="email" data-required="true" data-trigger="keyup focusout" tabindex=9></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 100px;">Last name</td>
                		<td><input type="text" name="last_name" data-required="true" tabindex=2></td>

	                    <td style="text-align:right;padding:6px 10px 0 0;">Home phone</td>
                		<td><input type="text" name="home_phone" tabindex=10 data-type="phone"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Date of birth</td>
                		<td><input type="text" class="dobdatepicker" name="date_of_birth" data-required="true" data-trigger="keyup change focusout" tabindex=3></td>

	                    <td style="text-align:right;padding:6px 10px 0 0;">Mobile phone</td>
                		<td><input type="text" name="mobile_phone" tabindex=11 data-type="phone"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 100px;">Gender</td>
                		<td><select name="gender" tabindex=4>
                		    <option></option>
                		    <option>Male</option>
                		    <option>Female</option>
                		</select></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Address</td>
                		<td><input type="text" name="address_line_1" tabindex=12></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">College</td>
                		<td><select name="college" data-required="true" tabindex=5 class="collegeselector">
                		    <option></option>
                		    {% for opt in selections.colleges %}
                		        <option>{{ opt }}</option>
                		    {% endfor %}
                		</select></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">...</td>
                		<td><input type="text" name="address_line_2" tabindex=13></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Campus</td>
                		<td><select name="campus" tabindex=6 class="campusselector">
                		    <option></option>
                		    {% for opt in selections.campus %}
                		        <option>{{ opt }}</option>
                		    {% endfor %}
                		</select></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Town / city</td>
                		<td><input type="text" name="city" tabindex=14></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 100px;">Course</td>
                		<td><select name="course" tabindex=7 class="courseselector">
                		    <option></option>
                		    {% for opt in selections.courses %}
                		        <option>{{ opt }}</option>
                		    {% endfor %}
                		</select></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Post code</td>
                		<td><input type="text" name="post_code" data-required="true" tabindex=15></td>
                    </tr>
        	        <tr>
        	            <td style="text-align:right;padding:6px 10px 0 0;">
	                        <p>How many miles do you travel to
	                        <br>college? Please provide an estimate<br>
	                        of the distance in <strong>one</strong> direction</p>
        	            </td>
        	            <td>
                	        <input type="text" name="travel" tabindex=8>
        	            </td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Your nationality</td>
                		<td><select name="nationality" tabindex=16>
                		    <option></option>
                		    <option>Scottish</option>
                		    <option>English</option>
                		    <option>Welsh</option>
                		    <option>Irish</option>
                		    <option>Other</option>
                		</select></td>
                    </tr>
                    <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">
	                        I agree to the <br>
                            <a target="_blank" href="/policy">SWAP data policy</a>
	                    </td>
                		<td><select name="data_policy_agreement" data-required="true" tabindex=17>
                		    <option></option>
                		    <option>Yes</option>
                		</select></td>
        	            
        	            <td colspan="2" style="padding:6px 0 0 10px;">You must 
        	            agree before submitting. 
                        </td>
                    </tr>
                </tbody>
	        </table>
	    </div>
	</div>

</div>



        



<!-- the education page -->
<div class="part education">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>Qualifications information</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
            <p><strong>Does any member of your family have any of the following qualifications?</strong></p>
	        <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Qualification</th>
                        <th>Parents / guardians</th>
                        <th>Siblings</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>HNC</td>
                        <td><input type="checkbox" name="parents_with_hnc"></td>
                        <td><input type="checkbox" name="siblings_with_hnc"></td>
                    </tr>
                    <tr>
                        <td>HND</td>
                        <td><input type="checkbox" name="parents_with_hnd"></td>
                        <td><input type="checkbox" name="siblings_with_hnd"></td>
                    </tr>
                    <tr>
                        <td>Degree</td>
                        <td><input type="checkbox" name="parents_with_degree"></td>
                        <td><input type="checkbox" name="siblings_with_degree"></td>
                    </tr>
                </tbody>
	        </table>
	        	        
	        <p><strong>Do you have any of the following qualifications from SCHOOL? 
	        If so, please enter how many (ie number) you have of each.</strong></p>
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">O grade / Standard grade / GCSE<br>(grades A-C / 1-3)</td>
                		<td><input type="text" name="o_standard_gcse"></td>
                    </tr>
                    <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Intermediate 2</td>
                		<td><input type="text" name="intermediate_2"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Highers / A levels<br>(grades A-C)</td>
                		<td><input type="text" name="highers_alevels"></td>
                    </tr>
                    <tr style="height:20px;">
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">If you have any other sorts of school qualification
	                    <br> (e.g. Matura, High School Diploma, Syltbetig), 
	                    <br>please list them</td>
                		<td>
                		    <textarea name="other_school_qualifications" class="bigfield"></textarea>
                		</td>
                    </tr>
                    <tr>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <p>Have you attended any educational programmes <br>or courses SINCE YOU LEFT SCHOOL, 
                            <br>e.g. in the community, college or through work? <br>If so, please list them</p>
                        </td>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <textarea name="qualifications_after_school" class="bigfield"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <p>Do you have any previous qualifications at grade 3/grade C 
                            <br>or above in Maths? If so please list 
                            <br>qualifications and grades. (Examined qualifications only, 
                            <br>no need to mention individual modules.)</p>
                        </td>
                        <td>
                            <textarea name="other_maths" class="bigfield"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <p>Do you have any previous qualifications at grade 3/grade C 
                            <br>or above in English? If so please list 
                            <br>qualifications and grades. (Examined qualifications only, 
                            <br>no need to mention individual modules.)</p>
                        </td>
                        <td>
                            <textarea name="other_english" class="bigfield"></textarea>
                        </td>
                    </tr>
                        
                </tbody>
            </table>
            
	    </div>
	</div>

</div>







<!-- the situation page -->
<div class="part situation">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>About your situation</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <p><strong>Do you have dependent children or adults? If so, enter the number of each below.</strong></p>
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Pre-school aged children</td>
                		<td><input type="text" name="dependents_pre_school_children"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Secondary school aged children</td>
                		<td><input type="text" name="dependents_secondary_school_children"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Primary school aged children</td>
                		<td><input type="text" name="dependents_primary_school_children"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Dependent adults (relatives/friends)</td>
                		<td><input type="text" name="dependents_adults"></td>
                    </tr>
                </tbody>
            </table>
	    </div>
	</div>


        
<hr></hr>

	<div class="row-fluid">
	    <div class="span12">		
	        <table class="table">
                <tr>
                    <td>
                        <p><strong>Which of these best describes your situation immediately
	        prior to starting your access programme?</strong> <br>Click in the box to see options.</p>
                    </td>
                    <td>
                        <select name="situation" multiple="multiple" class="select2this" placeholder="select all that apply">
                            <option></option>
                            <option>Employed full time</option>
                            <option>Employed part time</option>
                            <option>Student full time</option>
                            <option>Student part time</option>
                            <option>Caring for family</option>
                            <option>Caring (other)</option>
                            <option>Unemployed</option>
                            <option>Other</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>What was your main occupation over the last two years (if applicable)?</strong></p>
                    </td>
                    <td>
                        <input type="text" name="main_occupation" placeholder="type your occupation here">
                    </td>
                </tr>
                
                <tr>
                    <td>
                        <p><strong>What financial support will you receive while you 
                        are on a SWAP Programme?</strong> <br>Click in the box to see options.</p>
                    </td>
                    <td>
                        <select name="funding" multiple="multiple" class="select2this" placeholder="select all that apply">
                            <option></option>
                            <option>College bursary</option>
                            <option>College (other)</option>
                            <option>Benefits</option>
                            <option>Full-time job</option>
                            <option>Part-time job</option>
                            <option>Family</option>
                            <option>Bank loan</option>
                            <option>None</option>
                            <option>Other</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Please tell us about your ethnic background.
                        </strong><br>This information is collected in accordance 
                        with the code of practice issued by the Commission for 
                        Racial Equality.</p>
                    </td>
                    <td>
                        <select name="ethnicity">
                            <option value="">choose one</option>
                            
                            <optgroup label="White">
                                <option>Scottish</option>
                                <option>Other British</option>
                                <option>European Union</option>
                                <option>Gypsy – Traveller or Irish Traveller</option>
                                <option>Any other White background</option>
                            </optgroup>

                            <optgroup label="Asian, Asian Scottish, Asian British">
                                <option>Indian</option>
                                <option>Pakistani</option>
                                <option>Bangladeshi</option>
                                <option>Chinese</option>
                                <option>Any other Asian background</option>
                            </optgroup>

                            <optgroup label="Black, Black Scottish, Black British">
                                <option>Caribbean</option>
                                <option>African</option>
                                <option>Any other Black background</option>
                            </optgroup>

                            <optgroup label="Arab">
                                <option>Arab</option>
                            </optgroup>
                            
                            <optgroup label="Other ethnic background">
                                <option>Mixed White and Black Caribbean</option>
                                <option>Mixed White and Black African</option>
                                <option>Mixed White and Asian</option>
                                <option>Other Mixed Background</option>
                                <option>Any other background</option>
                                <option>I prefer not to say</option>
                            </optgroup>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Please tell us about any disabilities you 
                        have.</strong><br>This information is collected in 
                        accordance with the code of practice issued by the 
                        Disability Discrimination Act. Click in the box to see options.</p>
                    </td>
                    <td>
                        <select name="disability" multiple="multiple" class="select2this" placeholder="select all that apply">
                            <option></option>
                            <option>No known disability</option>
                            <option>Multiple disabilities</option>
                            <option>Dyslexia</option>
                            <option>Autistic Spectrum</option>
                            <option>Mental Health</option>
                            <option>Personal care support</option>
                            <option>Unseen disability e.g. asthma, cancer, HIV, diabetes</option>
                            <option>Wheelchair user/mobility difficulties</option>
                            <option>Deaf/hearing impairment</option>
                            <option>Blind/partially sighted</option>
                            <option>Other</option>
                        </select>
                        <br><input type="checkbox" name="registered_disabled">
                        Tick if registered disabled
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>If you were in Local Authority care when you 
                        were aged fifteen or sixteen, please indicate for how 
                        long</strong><br>
                        This information will be used for research purposes 
                        only and, if released, will not be in an identifiable 
                        form.</p>
                    </td>
                    <td>
                        <select name="local_authority_care">
                            <option value="">choose one</option>
                            <option>Less than 1 week</option>
                            <option>1 week to 3 months</option>
                            <option>3 months to 1 year</option>
                            <option>1 year to 3 years</option>
                            <option>3 years or more</option>
                        </select>
                    </td>
                </tr>

	        </table>
	    </div>
	</div>
</div>





<!-- the marketing page -->
<div class="part marketing">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>About SWAP</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <table class="table">
                <tr>
                    <td>
                        <p><strong>Why did you enrol on a SWAP Access course?
                        </strong></p>
                    </td>
                    <td>
                        <select name="why_on_swap">
                            <option></option>
                            <option>To get back into learning</option>
                            <option>To do a specific qualification (e.g. Nursing)</option>
                            <option>Improve / change career / job prospects</option>
                            <option>To go further in college</option>
                            <option>To go to University</option>
                            <option>Other</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Where did you first hear about the programme?
                        </strong></p>
                    </td>
                    <td>
                        <select name="where_heard_about">
                            <option></option>
                            <option>Newspaper / advert</option>
                            <option>Leaflet</option>
                            <option>College website</option>
                            <option>SWAP website</option>
                            <option>Internet / other website</option>
                            <option>Community group</option>
                            <option>Friend / family</option>
                            <option>Careers adviser</option>
                            <option>SWAP office</option>
                            <option>College</option>
                            <option>University</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>




<hr></hr>




<!-- the form submission button -->
<div class="part submit">

	<div class="row-fluid" style="margin-top:30px;">
	    <div class="span6">
	        <div class="alert alert-success">
            	<input id="triggersave" class="btn btn-success span2" style="margin-left:100px;" type="submit" name="submit" value="Submit your survey" />
	        </div>
	    </div>
	    <div class="span6">
	        <div class="activealert alert alert-warning clearfix" style="display:none;">
	            <p>There were errors with your responses. Please ensure all boxes in red have been completed correctly. Once correct, please re-submit.</p>
	        </div>
	    </div>
    </div>

</div>




</fieldset>
</form>

{% endblock %}


    

