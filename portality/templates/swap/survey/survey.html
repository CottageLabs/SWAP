{% extends "base.html" %}

{% block content %}

<script>
jQuery(document).ready(function() {    

    $("[data-required]").attr('data-required-message',"");

    // add a datepicker to all datepicker classes
    var opts = {
        inline: true,
        dateFormat: 'dd/mm/yy',
        changeYear: true
    }
    $('.datepicker').datepicker(opts);
    opts.yearRange = "-22:+0";
    opts.defaultDate = '-17y';
    opts.minDate = '-22y';
    opts.maxDate = '-12y';
    $('.dobdatepicker').datepicker(opts);
    
    // hide survey sections and add prev/next nav-throughs
    var doprevnext = function(event) {
        event.preventDefault();
        // TODO: validate the currently visible parts
        $('#survey').parsley('validate');
        $('.part').hide();
        $(this).hasClass('prev') ? $(this).closest('.part').prev().show() : $(this).closest('.part').next().show();
    }
    var prevnext = '<div style="margin:20px 0 20px 0;"><button class="btn btn-info prev">previous</button> <button class="btn btn-info next">next</button></div>';
    /*$('.part').append(prevnext);
    $('.part:first').find('.prev').remove();
    $('.part:last').find('.next').remove();
    $('.prev').bind('click',doprevnext);
    $('.next').bind('click',doprevnext);
    $('.part').hide();
    $('.part:first').show();*/
    $('#survey').parsley('validate');

    // review button show all
    var showall = function(event) {
        event.preventDefault();
        $('#activealert').hide();
        $('.part').show();
        $("html, body").animate({ scrollTop: 0 }, "fast");
    }
    $('.review').bind('click',showall);

    // add / remove rows to list items
    var first = true;
    $('table.multi').find('tbody').children('tr').each(function() {
        $(this).children('td').first().prepend('<a class="btn btn-warning delete-row" style="margin:-10px 2px 0 0;" href="#">delete</a>').children('select, input').addClass('narrow');
    });
    $('table.multi').find('tbody').append('<tr><td><a class="btn btn-success add-row" href="#">add</a></td></tr>');

    var addrow = function(event) {
        event.preventDefault();
        $(this).closest('tr').siblings().length == 5 ? $(this).hide() : false;
        if ( $(this).closest('tr').siblings().length < 6 ) {
            var row = $(this).closest('tr').prev().clone(true).get(0);
            $(row).insertBefore($(this).closest('tr'));
            $(row).find('.delete-row').bind('click',deleterow);
        }
    }
    var deleterow = function(event) {
        event.preventDefault();
        var row = $(this).closest('tr').clone(true).get(0);
        $(this).closest('tr').siblings().length == 6 ? $(this).closest('tr').siblings().find('.add-row').show() : false;
        $(this).closest('tr').siblings().length == 1 ? $(row).insertBefore($(this).closest('tr')) : false;
        $(this).closest('tr').remove();
    }
    $('.add-row').bind('click',addrow);
    $('.delete-row').bind('click',deleterow);

    var triggersave = function(event) {
        if ( !$('#survey').parsley('validate') ) {
            event.preventDefault();
            $('#activealert').show();
        }
    };
    $('#triggersave').bind('click',triggersave);

});
</script>

<style>
.part .well{
    margin-top:20px;
}
.narrow{
    width:180px;
}
.narrow.datepicker{
    width:100px;
}
input, textarea {
    width:200px;
}
select {
    width:210px;
}
.add-row, .delete-row {
    width:35px;
}
textarea.bigfield{
    width:400px;
    height:150px;
}
input.bigfield{
    width:360px;
    height:150px;
}
</style>

<form action="" id="survey" name="survey" method="post" data-validate="parsley">
<fieldset>


<!-- the intro part -->
<div class="part intro">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h1>Welcome to the SWAP survey</h1>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">
	        <p><strong>DO NOT CLOSE YOUR BROWSER WHILST COMPLETING THE SURVEY.</strong></p>
	        <p>Only students on <strong>SWAP programmes</strong> should complete the survey.</p>

	        <p>Required inputs are shown in red, until they are completed appropriately, when they will become green. You should check that all required inputs are green before proceeding. Inputs that are optional remain white.</p>

	        <p>Your responses will only be saved when you reach the end of the form and press the submit button.</p>
        </div>
	</div>

</div>



<!-- the student details page -->
<div class="part student">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>Your details</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">First name</td>
                		<td><input type="text" name="first_name" data-required="true"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Last name</td>
                		<td><input type="text" name="last_name" data-required="true"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Date of birth</td>
                		<td><input type="text" class="dobdatepicker" name="date_of_birth" data-required="true" data-trigger="keyup change focusout"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">UCAS number</td>
                		<td><input type="text" name="ucas_number"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">College</td>
                		<td><select name="college" data-required="true">
                		    <option></option>
                		    <option>TODO</option>
                		    {% for opt in selections.colleges %}
                		        <option>{{ opt }}</option>
                		    {% endfor %}
                		</select></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Gender</td>
                		<td><select name="gender">
                		    <option></option>
                		    <option>Male</option>
                		    <option>Female</option>
                		</select></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Email address</td>
                		<td><input type="text" name="email" data-type="email" data-required="true" data-trigger="keyup focusout"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Address</td>
                		<td><input type="text" name="address_line_1"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Home phone</td>
                		<td><input type="text" name="home_phone"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">...</td>
                		<td><input type="text" name="address_line_2"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Mobile phone</td>
                		<td><input type="text" name="mobile_phone"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">City</td>
                		<td><input type="text" name="city"></td>
                    </tr>
        	        <tr>
        	            <td></td>
        	            <td></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Region</td>
                		<td colspan="3"><input type="text" name="region"></td>
                    </tr>
        	        <tr>
        	            <td style="text-align:right;padding:6px 10px 0 0;">
	                        <p>How many miles do you travel to
	                        <br>college? Please provide an estimate<br>
	                        of the distance in <strong>one</strong> direction</p>
        	            </td>
        	            <td>
                	        <input type="text" name="travel">
        	            </td>
                    
	                    <td style="text-align:right;padding:6px 10px 0 100px;">Post code</td>
                		<td><input type="text" name="post_code" data-required="true"></td>
                    </tr>
                    <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">
	                        I agree to the <br>
                            <a target="_blank" href="/policy">SWAP data policy</a>
	                    </td>
                		<td><select name="data_policy_agreement" data-required="true">
                		    <option></option>
                		    <option>Yes</option>
                		</select></td>
        	            
        	            <td colspan="2" style="padding:6px 0 0 10px;">You must 
        	            agree before submitting. 
        	            <a target="_blank" href="/policy">Read more &raquo;</a></td>
                    </tr>
                </tbody>
	        </table>
	    </div>
	</div>

</div>



        



<!-- the education page -->
<div class="part education">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>Qualifications information</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
            <p><strong>Does any member of your family have any of the following qualifications?</strong></p>
	        <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Qualification</th>
                        <th>Parents / guardians</th>
                        <th>Siblings</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>HNC</td>
                        <td><input type="checkbox" name="parents_with_hnc"></td>
                        <td><input type="checkbox" name="siblings_with_hnc"></td>
                    </tr>
                    <tr>
                        <td>HND</td>
                        <td><input type="checkbox" name="parents_with_hnd"></td>
                        <td><input type="checkbox" name="siblings_with_hnd"></td>
                    </tr>
                    <tr>
                        <td>Degree</td>
                        <td><input type="checkbox" name="parents_with_degree"></td>
                        <td><input type="checkbox" name="siblings_with_degree"></td>
                    </tr>
                </tbody>
	        </table>
	        	        
	        <p><strong>Do you have any of the following qualifications from SCHOOL? 
	        If so, please enter how many (ie number) you have of each.</strong></p>
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">O grade / Standard grade / GCSE<br>(grades A-C / 1-3)</td>
                		<td><input type="text" name="o_standard_gcse"></td>
                    </tr>
                    <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Intermediate 2</td>
                		<td><input type="text" name="intermediate_2"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Highers / A levels<br>(grades A-C)</td>
                		<td><input type="text" name="highers_alevels"></td>
                    </tr>
                    <tr style="height:20px;">
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">If you have any other sorts of <br>qualification, please list them</td>
                		<td>
                		    <textarea name="other_school_qualifications" class="bigfield"></textarea>
                		</td>
                    </tr>
                    <tr>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <p>Have you attended any educational programmes <br>or courses SINCE YOU LEFT SCHOOL, 
                            <br>e.g. in the community, college or through work? <br>If so, please list them</p>
                        </td>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <textarea name="qualifications_after_school" class="bigfield"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align:right;padding:6px 10px 0 0;">
                            <p>Do you have any previous qualifications at grade 3/grade C 
                            <br>or above in Maths and English? If so please list 
                            <br>qualifications and grades. (Examined qualifications only, 
                            <br>no need to mention individual modules.)</p>
                        </td>
                        <td>
                            <textarea name="other_maths_english" class="bigfield"></textarea>
                        </td>
                    </tr>
                        
                </tbody>
            </table>
            
	    </div>
	</div>

</div>







<!-- the situation page -->
<div class="part situation">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>About your situation</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <p><strong>Do you have dependent children or adults? If so, enter the number of each below.</strong></p>
	        <table>
	            <tbody>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Pre-school aged children</td>
                		<td><input type="text" name="dependents_pre_school_children"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Secondary school aged children</td>
                		<td><input type="text" name="dependents_secondary_school_children"></td>
                    </tr>
        	        <tr>
	                    <td style="text-align:right;padding:6px 10px 0 0;">Primary school aged children</td>
                		<td><input type="text" name="dependents_primary_school_children"></td>

	                    <td style="text-align:right;padding:6px 10px 0 100px;">Dependent adults (relatives/friends)</td>
                		<td><input type="text" name="dependents_adults"></td>
                    </tr>
                </tbody>
            </table>
	    </div>
	</div>


        
<hr></hr>



	<div class="row-fluid">
	    <div class="span12">		
	        <p><strong>Which of these best describes your situation immediately
	        prior to starting your access programme? Please tick all that apply.</strong></p>
	        <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td><input type="checkbox" name="employed_full_time"> Employed full time</td>
                        <td><input type="checkbox" name="employed_part_time"> Employed part time</td>
                        <td><input type="checkbox" name="student_full_time"> Student full time</td>
                        <td><input type="checkbox" name="student_part_time"> Student part time</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" name="caring_for_family"> Caring for family</td>
                        <td><input type="checkbox" name="caring_other"> Caring (other)</td>
                        <td><input type="checkbox" name="unemployed"> Unemployed</td>
                        <td><textarea name="employment_other" placeholder="other (describe here)"></textarea></td>
                    </tr>
                    <tr>
                        <td colspan="3" style="text-align:right;padding:6px 10px 0 0;">What was your <strong>main</strong> occupation over the last two years? (if applicable)</td>
                        <td><input type="text" name="main_occupation"></td>
                    </tr>
                </tbody>
	        </table>
	    </div>
	</div>


	<div class="row-fluid">
	    <div class="span12">		
	        <table class="table">
                <tr>
                    <td>
                        <p><strong>What financial support will you receive while you 
                        are on a SWAP Programme?</strong> <br>Please select all that 
                        apply.</p>
                    </td>
                    <td>
                        <select name="funding">
                            <option></option>
                            <option>College bursary</option>
                            <option>College (other)</option>
                            <option>Benefits</option>
                            <option>Full-time job</option>
                            <option>Part-time job</option>
                            <option>Family</option>
                            <option>Bank loan</option>
                            <option>None</option>
                            <option>Other</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Please tell us about your ethnic background.
                        </strong><br>This information is collected in accordance 
                        with the code of practice issued by the Commission for 
                        Racial Equality. Please select all that apply.</p>
                    </td>
                    <td>
                        <select name="ethnicity">
                            <option></option>
                            
                            <optgroup label="White">
                                <option>Scottish</option>
                                <option>Other British</option>
                                <option>European Union</option>
                                <option>Any other White background</option>
                            </optgroup>

                            <optgroup label="Asian, Asian Scottish, Asian British">
                                <option>Indian</option>
                                <option>Pakistani</option>
                                <option>Bangladeshi</option>
                                <option>Chinese</option>
                                <option>Any other Asian background</option>
                            </optgroup>

                            <optgroup label="Black, Black Scottish, Black British">
                                <option>Caribbean</option>
                                <option>African</option>
                                <option>Any other Black background</option>
                            </optgroup>

                            <optgroup label="Other ethnic background">
                                <option>Any other background</option>
                                <option>Any mixed background</option>                            
                            </optgroup>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Please tell us about any disabilities you 
                        have.</strong><br>This information is collected in 
                        accordance with the code of practice issued by the 
                        Disability Discrimination Act. Please select all that 
                        apply.</p>
                    </td>
                    <td>
                        <select name="disability">
                            <option></option>
                            <option>No known disability</option>
                            <option>Multiple disabilities</option>
                            <option>Dyslexia</option>
                            <option>Autistic Spectrum</option>
                            <option>Mental Health</option>
                            <option>Personal care support</option>
                            <option>Unseen disability e.g. asthma</option>
                            <option>Wheelchair user/mobility difficulties</option>
                            <option>Deaf/hearing impairment</option>
                            <option>Blind/partially sighted</option>
                            <option>Other (please specify)</option>
                        </select>
                        <br><input type="checkbox" name="registered_disabled">
                        Tick if registered disabled
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>If you were in Local Authority care when you 
                        were aged fifteen or sixteen, please indicate for how 
                        long</strong><br>
                        This information will be used for research purposes 
                        only and, if released, will not be in an identifiable 
                        form.</p>
                    </td>
                    <td>
                        <select name="local_authority_care">
                            <option></option>
                            <option>Less than 1 week</option>
                            <option>1 week to 3 months</option>
                            <option>3 months to 1 year</option>
                            <option>1 year to 3 years</option>
                            <option>3 years or more</option>
                        </select>
                    </td>
                </tr>

	        </table>
	    </div>
	</div>
</div>





<!-- the marketing page -->
<div class="part marketing">

	<div class="row-fluid">
	    <div class="span12">
	        <div class="well">
	            <h2>About SWAP</h2>
	        </div>
	    </div>
	</div>

	<div class="row-fluid">
	    <div class="span12">		
	        <table class="table">
                <tr>
                    <td>
                        <p><strong>Why did you enrol on a SWAP Access course?
                        </strong></p>
                    </td>
                    <td>
                        <select name="why_on_swap">
                            <option></option>
                            <option>To get back into learning</option>
                            <option>To do a specific qualification (e.g. Nursing)</option>
                            <option>Improve / change career / job prospects</option>
                            <option>To go further in college</option>
                            <option>To go to University</option>
                            <option>Other</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p><strong>Where did you first hear about the programme?
                        </strong></p>
                    </td>
                    <td>
                        <select name="where_heard_about">
                            <option></option>
                            <option>Newspaper / advert</option>
                            <option>Leaflet</option>
                            <option>Internet / website</option>
                            <option>Community group</option>
                            <option>Friend / family</option>
                            <option>Careers adviser</option>
                            <option>SWAP</option>
                            <option>College</option>
                            <option>University</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>




<hr></hr>




<!-- the form submission button -->
<div class="part submit">

	<div class="row-fluid" style="margin-top:30px;">
	    <div class="span6">
	        <div class="alert alert-success">
            	<input id="triggersave" class="btn btn-success span2" style="margin-left:100px;" type="submit" name="submit" value="Submit your survey" />
	        </div>
	    </div>
	    <div class="span6">
	        <div id="activealert" class="alert alert-warning clearfix" style="display:none;">
	            <p>There are errors with your responses. Please click below to review your responses, then you can scroll through or use the previous / next buttons to check them. Any errors will be highlighted in red. Once there are no errors, please try to submit once again.</p>
	        </div>
	        <div class="alert alert-warning clearfix">
        	    <p><button class="btn btn-warning span2 review" style="margin-left:100px;">Review your responses</button></p>
	        </div>
	    </div>
    </div>

</div>




</fieldset>
</form>

{% endblock %}


    

